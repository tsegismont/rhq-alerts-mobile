'use strict';

var bimba = {"id": 10038, "name": "Too much used", "alertDefinition": {"id": 10021, "name": "Too much used", "enabled": true, "priority": "HIGH", "recoveryId": 0, "conditionMode": "ANY", "conditions": [], "notifications": [], "dampeningCategory": "NONE", "dampeningCount": 0, "dampeningPeriod": 0, "dampeningUnit": null, "links": [
    {"coregui": {"href": "http://localhost:7080/coregui/#Resource/10010/Alerts/Definitions/10021"}},
    {"resource": {"href": "http://localhost:7080/rest/resource/10010"}}
]}, "resource": {"resourceName": "/home", "resourceId": 10010, "typeName": "File System", "typeId": 10016, "pluginName": "Platforms", "parentId": 10001, "status": "COMMITTED", "availability": "UP", "links": [
    {"operationDefinitions": {"href": "http://localhost:7080/rest/operation/definitions?resourceId=10010"}},
    {"self": {"href": "http://localhost:7080/rest/resource/10010"}},
    {"schedules": {"href": "http://localhost:7080/rest/resource/10010/schedules"}},
    {"availability": {"href": "http://localhost:7080/rest/resource/10010/availability"}},
    {"children": {"href": "http://localhost:7080/rest/resource/10010/children"}},
    {"alerts": {"href": "http://localhost:7080/rest/resource/10010/alerts"}},
    {"alertDefinitions": {"href": "http://localhost:7080/rest/alert/definitions?resourceId=10010"}},
    {"parent": {"href": "http://localhost:7080/rest/resource/10001/"}},
    {"coregui": {"href": "http://localhost:7080/coregui/#Resource/10010"}}
], "ancestry": "10008_:_10001_:_stetson", "location": null, "description": "/dev/sda5: /home"}, "definitionEnabled": true, "ackBy": null, "ackTime": 0, "alertTime": 1401805256369, "description": "\n  - Condition 1: Used Percentage > 30,0%\n  - Date/Time: 2014/06/03 16:20:51 CEST\n  - Details: 36,0%\n", "links": [
    {"conditions": {"href": "http://localhost:7080/rest/alert/10038/conditions"}},
    {"notification": {"href": "http://localhost:7080/rest/alert/10038/notifications"}},
    {"definition": {"href": "http://localhost:7080/rest/alert/10038/definition"}},
    {"coregui": {"href": "http://localhost:7080/coregui/#Resource/10010/Alerts/10038"}}
]};

var bimbou = [
    bimba,
    {"id": 10037, "name": "Too much used", "alertDefinition": {"id": 10021, "name": "Too much used", "enabled": true, "priority": "HIGH", "recoveryId": 0, "conditionMode": "ANY", "conditions": [], "notifications": [], "dampeningCategory": "NONE", "dampeningCount": 0, "dampeningPeriod": 0, "dampeningUnit": null, "links": [
        {"coregui": {"href": "http://localhost:7080/coregui/#Resource/10010/Alerts/Definitions/10021"}},
        {"resource": {"href": "http://localhost:7080/rest/resource/10010"}}
    ]}, "resource": {"resourceName": "/home", "resourceId": 10010, "typeName": "File System", "typeId": 10016, "pluginName": "Platforms", "parentId": 10001, "status": "COMMITTED", "availability": "UP", "links": [
        {"operationDefinitions": {"href": "http://localhost:7080/rest/operation/definitions?resourceId=10010"}},
        {"self": {"href": "http://localhost:7080/rest/resource/10010"}},
        {"schedules": {"href": "http://localhost:7080/rest/resource/10010/schedules"}},
        {"availability": {"href": "http://localhost:7080/rest/resource/10010/availability"}},
        {"children": {"href": "http://localhost:7080/rest/resource/10010/children"}},
        {"alerts": {"href": "http://localhost:7080/rest/resource/10010/alerts"}},
        {"alertDefinitions": {"href": "http://localhost:7080/rest/alert/definitions?resourceId=10010"}},
        {"parent": {"href": "http://localhost:7080/rest/resource/10001/"}},
        {"coregui": {"href": "http://localhost:7080/coregui/#Resource/10010"}}
    ], "ancestry": "10008_:_10001_:_stetson", "location": null, "description": "/dev/sda5: /home"}, "definitionEnabled": true, "ackBy": null, "ackTime": 0, "alertTime": 1401804956395, "description": "\n  - Condition 1: Used Percentage > 30,0%\n  - Date/Time: 2014/06/03 16:15:51 CEST\n  - Details: 36,0%\n", "links": [
        {"conditions": {"href": "http://localhost:7080/rest/alert/10037/conditions"}},
        {"notification": {"href": "http://localhost:7080/rest/alert/10037/notifications"}},
        {"definition": {"href": "http://localhost:7080/rest/alert/10037/definition"}},
        {"coregui": {"href": "http://localhost:7080/coregui/#Resource/10010/Alerts/10037"}}
    ]},
    {"id": 10036, "name": "Medium much used", "alertDefinition": {"id": 10021, "name": "Medium much used", "enabled": true, "priority": "MEDIUM", "recoveryId": 0, "conditionMode": "ANY", "conditions": [], "notifications": [], "dampeningCategory": "NONE", "dampeningCount": 0, "dampeningPeriod": 0, "dampeningUnit": null, "links": [
        {"coregui": {"href": "http://localhost:7080/coregui/#Resource/10010/Alerts/Definitions/10021"}},
        {"resource": {"href": "http://localhost:7080/rest/resource/10010"}}
    ]}, "resource": {"resourceName": "/home", "resourceId": 10010, "typeName": "File System", "typeId": 10016, "pluginName": "Platforms", "parentId": 10001, "status": "COMMITTED", "availability": "UP", "links": [
        {"operationDefinitions": {"href": "http://localhost:7080/rest/operation/definitions?resourceId=10010"}},
        {"self": {"href": "http://localhost:7080/rest/resource/10010"}},
        {"schedules": {"href": "http://localhost:7080/rest/resource/10010/schedules"}},
        {"availability": {"href": "http://localhost:7080/rest/resource/10010/availability"}},
        {"children": {"href": "http://localhost:7080/rest/resource/10010/children"}},
        {"alerts": {"href": "http://localhost:7080/rest/resource/10010/alerts"}},
        {"alertDefinitions": {"href": "http://localhost:7080/rest/alert/definitions?resourceId=10010"}},
        {"parent": {"href": "http://localhost:7080/rest/resource/10001/"}},
        {"coregui": {"href": "http://localhost:7080/coregui/#Resource/10010"}}
    ], "ancestry": "10008_:_10001_:_stetson", "location": null, "description": "/dev/sda5: /home"}, "definitionEnabled": true, "ackBy": null, "ackTime": 0, "alertTime": 1401804656384, "description": "\n  - Condition 1: Used Percentage > 30,0%\n  - Date/Time: 2014/06/03 16:10:51 CEST\n  - Details: 36,0%\n", "links": [
        {"conditions": {"href": "http://localhost:7080/rest/alert/10036/conditions"}},
        {"notification": {"href": "http://localhost:7080/rest/alert/10036/notifications"}},
        {"definition": {"href": "http://localhost:7080/rest/alert/10036/definition"}},
        {"coregui": {"href": "http://localhost:7080/coregui/#Resource/10010/Alerts/10036"}}
    ]},
    {"id": 10035, "name": "Low much used", "alertDefinition": {"id": 10021, "name": "Low much used", "enabled": true, "priority": "LOW", "recoveryId": 0, "conditionMode": "ANY", "conditions": [], "notifications": [], "dampeningCategory": "NONE", "dampeningCount": 0, "dampeningPeriod": 0, "dampeningUnit": null, "links": [
        {"coregui": {"href": "http://localhost:7080/coregui/#Resource/10010/Alerts/Definitions/10021"}},
        {"resource": {"href": "http://localhost:7080/rest/resource/10010"}}
    ]}, "resource": {"resourceName": "/home", "resourceId": 10010, "typeName": "File System", "typeId": 10016, "pluginName": "Platforms", "parentId": 10001, "status": "COMMITTED", "availability": "UP", "links": [
        {"operationDefinitions": {"href": "http://localhost:7080/rest/operation/definitions?resourceId=10010"}},
        {"self": {"href": "http://localhost:7080/rest/resource/10010"}},
        {"schedules": {"href": "http://localhost:7080/rest/resource/10010/schedules"}},
        {"availability": {"href": "http://localhost:7080/rest/resource/10010/availability"}},
        {"children": {"href": "http://localhost:7080/rest/resource/10010/children"}},
        {"alerts": {"href": "http://localhost:7080/rest/resource/10010/alerts"}},
        {"alertDefinitions": {"href": "http://localhost:7080/rest/alert/definitions?resourceId=10010"}},
        {"parent": {"href": "http://localhost:7080/rest/resource/10001/"}},
        {"coregui": {"href": "http://localhost:7080/coregui/#Resource/10010"}}
    ], "ancestry": "10008_:_10001_:_stetson", "location": null, "description": "/dev/sda5: /home"}, "definitionEnabled": true, "ackBy": null, "ackTime": 0, "alertTime": 1401804356377, "description": "\n  - Condition 1: Used Percentage > 30,0%\n  - Date/Time: 2014/06/03 16:05:51 CEST\n  - Details: 36,0%\n", "links": [
        {"conditions": {"href": "http://localhost:7080/rest/alert/10035/conditions"}},
        {"notification": {"href": "http://localhost:7080/rest/alert/10035/notifications"}},
        {"definition": {"href": "http://localhost:7080/rest/alert/10035/definition"}},
        {"coregui": {"href": "http://localhost:7080/coregui/#Resource/10010/Alerts/10035"}}
    ]}
];


angular.module('rhqAlerts.controllers', [])

    .controller('AppCtrl', function ($scope) {
        $scope.getAlertFlagCssClass = function (priority) {
            if (priority == 'HIGH') {
                return 'assertive';
            }
            if (priority == 'MEDIUM') {
                return 'energized';
            }
            if (priority == 'LOW') {
                return 'positive';
            }
            return '';
        };
    })

    .controller('AlertsCtrl', function ($scope, $timeout) {
        $scope.alerts = bimbou;

        $scope.doRefresh = function () {
            $timeout(function () {
                //Stop the ion-refresher from spinning
                $scope.$broadcast('scroll.refreshComplete');
            }, 1000);
        };
    })

    .controller('AlertCtrl', function ($scope, $state) {
        $scope.alert = bimba;

        $scope.backToList = function () {
            $state.transitionTo("app.alerts");
        };

        $scope.getAvailabilityCssClasses = function (availType) {
            if (availType == 'UP') {
                return ['ion-checkmark', 'avail-up'];
            }
            if (availType == 'DOWN') {
                return ['ion-alert', 'avail-down'];
            }
            return ['ion-help', 'avail-unknown'];

        }
    });
